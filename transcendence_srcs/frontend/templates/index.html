{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
	<meta name="csrf-token" content="{{ csrf_token }}">
    <link rel="icon" type="image/x-icon" href="{% static 'img/Logo_page.ico' %}">

    <!--Boostrp css requirement-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

    <!--Police css-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet">

    <title>Ft_Transcendence</title>
</head>

<body>
    <!--Boostrp CDN link requirement-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
    
    <nav class="navbar navbar-expand-md navbar-dark p-0 fixed-top">
        <button class="navbar-toggler ms-2 px-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#OffcanvasNavBar" aria-controls="OffcanvasNavBar" aria-label="Toggle NavBar">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <a class="navbar-brand ms-3" href="/" data-link><img src="{% static 'img/Logo_v2.png' %}" alt="logo" width="75" height="65" id="logo"/></a>
        <div class="collapse navbar-collapse" id="NavCollaspe">
            <ul class="navbar-nav me-auto mb-2 mb-md-0">
                <li class="nav-item"><a class="nav-link fs-5 me-2" href="/page1/" data-link>Page1</a></li>
                <li class="nav-item"><a class="nav-link fs-5 me-2" href="/page2/" data-link>Page2</a></li>
                <li class="nav-item"><a class="nav-link fs-5 me-2" href="/page3/" data-link>Page3</a></li>
                <li class="nav-item"><a class="nav-link fs-5 me-2" href="/prank/" data-link>Prank</a></li>
            </ul>
            <div class="dropdown">
                <button class="btn dropdown-toggle" id="btn_lang" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="{{ texts.Flag_nav }}" alt="lang" height="30px" width="30px"/>
                </button>
                <ul class="dropdown-menu dropdown-menu-md-end pe-3" id="dropdown_lang">
                    <li><button class="dropdown-item px-3 mx-2" id="btn_fr" onclick="Change_lang('fr')"><img src="{% static 'img/flags/fr.png' %}" alt="fr" height="50px" width="50px"/><span class="fs-4"> Français</span></button></li>
                    <li><button class="dropdown-item px-3 mx-2" id="btn_en" onclick="Change_lang('en')"><img src="{% static 'img/flags/en.png' %}" alt="fr" height="50px" width="50px"/><span class="fs-4">	English</span></button></li>
                    <li><button class="dropdown-item px-3 mx-2" id="btn_es" onclick="Change_lang('es')"><img src="{% static 'img/flags/es.png' %}" alt="fr" height="50px" width="50px"/><span class="fs-4">	Español</span></button></li>
                </ul>
            </div>
        </div>
		<div id="user_connected" style="display: none;">
			<!-- script dyhnamique -->
		</div>
		<button class="btn btn-light" id="logout_btn" type="button" style="display:none; margin-right: 15px;">Deconnexion</button>
		<div class="btn-group me-3 d-flex align-items-center" id="bar_sub_login" role="toolbar" aria-label="Connexion Inscription" style="display:none;">
            <a class="btn btn-outline-light d-none d-md-block me-2" href="/sign_in/" id="signin_btn">{{ texts.Sign_in }}</a>
            <button class="btn btn-outline-light d-block d-md-none rounded-2 me-2" id="login_btn_small" type="button" data-bs-toggle="dropdown" aria-expanded="false" >
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="grey" class="bi bi-person" viewBox="0 0 16 16">
                	<path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
				</svg>
            </button>
            <button class="btn btn-light d-none d-md-block" id="login_btn_large" type="button" data-bs-toggle="dropdown" aria-expanded="false" >{{ texts.Log_in }}</button>
            <form class="dropdown-menu dropdown-menu-end p-3 log_form" id="dropdown_form">
				{% csrf_token %}
                <div class="mb-1">
                    <label for="Email_input" class="form-label fs-4">{{ texts.Email_1 }}</label>
                    <input type="email" class="form-control fs-4" id="Email_input" placeholder="email@exemple.com" name="email" required>
                </div>
                <div class="mb-1">
                    <label for="Passwd_input" class="form-label fs-4">{{ texts.Passwd_1 }}</label>
                    <input type="password" class="form-control fs-4" id="Passwd_input" placeholder="123merde" name="password" required>
                </div>
                <div class="text-center">   
                    <button type="submit" class="btn btn-primary fs-4">{{ texts.OK_btn }}</button>
                </div>
            </form>
        </div>
    </nav>
    
    <!--Offcanva Menu (petit ecran)-->
    <div class="offcanvas offcanvas-start text-white" tabindex="-1" id="OffcanvasNavBar" aria-labelledby="OffcanvasNavBarLabel">
        <div class="offcanvas-header">
            <h1 class="offcanvas-title" id="offcanvasNavbarLabel">Menu</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body d-flex flex-column pt-0">
            <ul class="navbar-nav justify-content-end pe-3">
                <li class="nav-item"><a class="nav-link fs-5" href="/page1/" data-bs-dismiss="offcanvas" aria-label="Close" data-link>Page 1</a> </li>
                <li class="nav-item"><a class="nav-link fs-5" href="/page2/" data-bs-dismiss="offcanvas" aria-label="Close" data-link>Page 2</a></li>
                <li class="nav-item"><a class="nav-link fs-5" href="/page3/" data-bs-dismiss="offcanvas" aria-label="Close" data-link>Page 3</a></li>
                <li class="nav-item"><a class="nav-link fs-5" href="/prank/" data-bs-dismiss="offcanvas" aria-label="Close" data-link>Prank</a></li>
            </ul>
            <div class="mt-auto">
                <div class="dropdown">
                    <button class="btn dropdown-toggle" id="btn_lang" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="{{ texts.Flag_nav }}" alt="lang" height="30px" width="30px"/>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-lg-end pe-3" id="dropdown_lang">
                        <li><button class="dropdown-item px-3 mx-2" id="btn_fr" onclick="Change_lang('fr')"><img src="{% static 'img/flags/fr.png' %}" alt="fr" height="50px" width="50px"/><span class="fs-4"> Français</span></button></li>
                        <li><button class="dropdown-item px-3 mx-2" id="btn_en" onclick="Change_lang('en')"><img src="{% static 'img/flags/en.png' %}" alt="fr" height="50px" width="50px"/><span class="fs-4">	English</span></button></li>
                        <li><button class="dropdown-item px-3 mx-2" id="btn_es" onclick="Change_lang('es')"><img src="{% static 'img/flags/es.png' %}" alt="fr" height="50px" width="50px"/><span class="fs-4">	Español</span></button></li>
                    </ul>
                </div>
                <a href="/sign_in/" class="btn btn-outline-light mt-2 w-100 rounded-5">{{ texts.Sign_in }}</a>
            </div>
        </div>
    </div>
    

    <div id="app">  
        <!--Sript dynamique-->
    </div>
    
    <script defer src="{% static 'js/main.js' %}"></script>
    <script defer src="{% static 'js/pong.js' %}"></script>
    
    {% if messages %}
    {% for message in messages %}
    <script>
        alert('{{ message }}');
        document.getElementById('login_btn').click();
    </script>
    {% endfor %}
    {% endif %}

    <!--Template injecter par le js dans le div app-->
    <template id="temp_index">
		{% if messages %}
			{% for message in messages %}
			<div class="alert alert-info">
				{{ message }}
			</div>
			{% endfor %}
		{% endif %}
        <div class="row align-items-center" id="sign_log" style="display: flex;">
            <div class="col p-2 ">
                <p class="fs-3 fw-bold m-0 txt-blue">{{ texts.Index_1 }}</p>
                <p class="fs-1 fw-bolder txt-red text-center">Ft_Transcendence</p>
                <p class="fs-5 txt-blue">{{ texts.Index_2 }}</p>
                <div class="btn-group btn-group-lg d-flex justify-content-center" aria-label="Connexion Inscription">
                    <a class="btn btn-dark" href="/sign_in/" id="signin_btn_index"><span>{{ texts.Regis_now }}</span></a>
                    <button class="btn btn-dark" id="login_btn_index" type="button" onclick="Click_login();"><span>{{ texts.Log_on }}</span></button>
                </div>
            </div>
            <div class="col p-4">
                <img src="{% static 'anim/pong_index.gif' %}" alt="pong_index gif" class="img-fluid d-block mx-auto rounded-5 img-border img-flex">
            </div>
        </div>
		<!-- <script defer src="{% static 'register.js' %}"></script> -->
		<div class="row align-items-center" id="stats" style="display: flex;">
			<div class="container mt-5">
				<p class="fs-3 fw-bold m-0 txt-blue text-center">Stats</p>
				<table class="table table-bordered">
					<thead class="thead-dark">
						<tr>
							<th class="fs-3 fw-bold m-0 txt-blue text-center" scope="col">Wins</th>
							<th class="fs-3 fw-bold m-0 txt-red text-center" scope="col">Loses</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td class="fs-5 txt-blue text-center" id="nbWin">{{ request.user.nb_win }}</td>
							<td class="fs-5 txt-red text-center" id="nbLose">{{ request.user.nb_lose }}</td>
						</tr>
					</tbody>
				</table>
			</div>
        </div>
		<div class="box" id="game" style="display: block;">
            <div id="main-menu">
                <button id="player-vs-ia">Player vs IA</button>
                <button id="player-vs-player">Player vs Player</button>
            </div>
            <div id="difficulty-menu" style="display: none;">
                <button id="easy">Easy</button>
                <button id="medium">Medium</button>
                <button id="hard">Hard</button>
            </div>
            <div id="score-container">
                <div id="score-player2">0</div>
                <div id="score-player1">0</div>
            </div>
            <div class="padding1"></div>
            <div class="padding2"></div>
            <div class="ball"></div>
            <div class="delimiter"></div>
        </div>
    </template>

    <template id="temp_page1">
        <!-- <div class="box">
            <div id="main-menu">
                <button id="player-vs-ia">Player vs IA</button>
                <button id="player-vs-player">Player vs Player</button>
            </div>
            <div id="difficulty-menu" style="display: none;">
                <button id="easy">Easy</button>
                <button id="medium">Medium</button>
                <button id="hard">Hard</button>
            </div>
            <div id="score-container">
                <div id="score-player2">0</div>
                <div id="score-player1">0</div>
            </div>
            <div class="padding1"></div>
            <div class="padding2"></div>
            <div class="ball"></div>
            <div class="delimiter"></div>
        </div> -->
    </template>
    <template id="temp_page2">
        <h2>C'est la superbe page 2</h2>
    </template>
    <template id="temp_page3">
        <h2>C'est la magnifique et dernière page</h2>
    </template>
    <template id="temp_notFound">
        <img src="{% static 'anim/404_err.gif' %}" alt="Err_404 gif" class="img-fluid d-block mx-auto rounded-5 img-border"/>
        <h1 class="text-center fw-bolder">{{ texts.404_Err }}</h1>
    </template>

	<!-- Modal Bootstrap pour connexion -->
	<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="infoco"><!--script dynamique--></h5>
				</div>
			</div>
		</div>
	</div>

</body>
</html>
